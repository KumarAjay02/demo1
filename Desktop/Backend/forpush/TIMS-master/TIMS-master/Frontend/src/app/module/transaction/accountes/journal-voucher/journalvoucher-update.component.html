<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <form name="editForm" role="form" novalidate [formGroup]="editForm" (ngSubmit)="updateJournalVoucher()">
        <div class="card card-box mb-2">
          <div class="card-title text-center">
            Journal Voucher
          </div>
          <div class="card-body">
            <div class="row mb-2">
              <div class="col-md-2 text-end">
                <label for="FINANCIAL_YEAR" class="form-label">Financial Year</label>
              </div>
              <div class="col-md-2">
                <select class="form-select form-select-sm" formControlName="FINANCIAL_YEAR">
                  <option value="undefined">-Select-</option>
                  <option value="2324">2324</option>
                  <option value="2425">2425</option>
                  <option value="2526">2526</option>
                </select>
              </div>
              <div class="col-md-2 text-end">
                <label for="BRANCH_CODE" class="form-label">Branch</label>
              </div>
              <div class="col-md-2">
                <select class="form-select form-select-sm" formControlName="BRANCH_CODE">
                  <option value="undefined">-Select-</option>
                  <option value="GGCO">GGCO</option>
                  <option value="MYS">MYS</option>
                  <option value="MDS">MDS</option>
                </select>
              </div>
              <div class="col-md-2 text-end">
                <label for="ReversEntry" class="form-label">Revers</label>
              </div>
              <div class="col-md-2">
                <select class="form-select form-select-sm" formControlName="ReversEntry">
                  <option value="N">No</option>
                  <option value="Y">Yes</option>
                </select>
              </div>
            </div>
            <div class="row mb-2">
              <div class="col-md-2 text-end">
                <label for="DOC_TYPE" class="form-label">Doc Type</label>
              </div>
              <div class="col-md-2">
                <select class="form-select form-select-sm" formControlName="DOC_TYPE">
                  <option value="undefined">-Select-</option>
                  <option value="JNLVOU">JOURNAL VOUCHER</option>
                </select>
              </div>
              <div class="col-md-2 text-end">
                <label for="DOC_NO" class="form-label">Doc No</label>
              </div>
              <div class="col-md-2">
                <input id="DOC_NO" formControlName="DOC_NO" class="form-control form-control-sm text-uppercase" />
              </div>
              <div class="col-md-2 text-end">
                <label for="DOC_DATE" class="form-label">Doc Date</label>
              </div>
              <div class="col-md-2">
                <input type="date" id="DOC_DATE" formControlName="DOC_DATE" class="form-control form-control-sm text-uppercase" />
              </div>
            </div>

            <div class="row mb-2">
              <div class="col-md-2 text-end">
                <label for="NARRATION" class="form-label">Narration</label>
              </div>
              <div class="col-md-10">
                <input id="NARRATION" formControlName="NARRATION" class="form-control form-control-sm text-uppercase" />
              </div>
            </div>
            <div class="row mb-2" style="overflow:auto; max-height:300px;">
              <table class="table table-sm table-bordered table-bordered mb-0">
                <thead class="table-light">
                  <tr>
                    <td colspan="4" class="form-label text-end">Total</td>
                    <td>{{drAmt}}</td>
                    <td>{{crAmt}}</td>
                    <td>&nbsp;</td>
                  </tr>
                  <tr>
                    <th>SR#</th>
                    <th>GL Code</th>
                    <th>Cost Code</th>
                    <th>Doc Ref</th>
                    <th>Debit</th>
                    <th>Credit </th>
                    <th style="width: 20%;" class="text-end" colspan="2">
                      <button type="button" class="btn btn-link p-0 m-0 border-0 bg-transparent text-success"
                              (click)="addRow()"
                              (keydown.enter)="addRow()"
                              (keydown.space)="addRow()"
                              aria-label="Add row" matTooltip="Add Row" matTooltipPosition="above">
                        <i class="bi bi-plus-circle text-success" style="font-size: 14px;">Add</i>
                      </button>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container *ngFor="let jvlDtls of journalVoucherDtls; let JVIndex=index">
                    <tr>
                      <td>{{JVIndex+1}}</td>
                      <td>
                        <input type="text" class="form-control form-control-sm text-uppercase"
                               [ngModel]=jvlDtls.ACCOUNT_CODE [ngModelOptions]="{ standalone: true }"/>
                      </td>
                      <td>
                        <input type="text" class="form-control form-control-sm text-uppercase"
                               [ngModel]=jvlDtls.COST_CODE [ngModelOptions]="{ standalone: true }"/>
                      </td>
                      <td>
                        <input type="text" class="form-control form-control-sm text-uppercase"
                               [ngModel]=jvlDtls.DOC_REF [ngModelOptions]="{ standalone: true }"/>
                      </td>
                      <td>
                        <input type="number" class="form-control form-control-sm text-uppercase"
                               [ngModel]=jvlDtls.DEBIT_AMOUNT [ngModelOptions]="{ standalone: true }"/>
                      </td>
                      <td>
                        <input type="number" class="form-control form-control-sm text-uppercase"
                               [ngModel]=jvlDtls.CREDIT_AMOUNT [ngModelOptions]="{ standalone: true }"/>
                      </td>
                      <td class="text-end">
                        <div class="btn-group">
                          <button type="button" class="btn btn-sm my-btn-danger" (click)="removeRow(JVIndex,journalVoucherDtls)"
                                  style="border-radius: 0 30px 30px 0;" matTooltipPosition="above"
                                  matTooltip="Delete">
                            <i class="bi bi-trash-fill"></i>
                          </button>
                        </div>
                      </td>
                    </tr>
                    </ng-container>
                </tbody>
              </table>
            </div>
          </div>



          <div class="card-footer">
            <div class="row card-margin-bottom-12">
              <div class="col-md-4 text-end">

              </div>

              <div class="col-md-1">
                <button type="submit" id="save" class="btn btn-sm rounded-pill my-btn-light">
                  Save
                </button>
              </div>
              <div class="col-md-1">
                <button type="button" id="cancel-save" class="btn btn-sm rounded-pill my-btn-light"
                        (click)="previousState()">
                  Close
                </button>
              </div>
              <div class="col-md-1">
                <button type="button" id="Approval" class="btn btn-sm rounded-pill my-btn-light">
                  Approval
                </button>
              </div>
              <div class="col-md-4">

              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
